const App=function(){return App.state.view_handler()};App.state={_to_render:"landing",_to_render_stream:!1,settings:null,deviceBank:null,stream_listener:null,device_history:null,get_device_bank:()=>{fetch("/get/deviceBank",{method:"GET",redirect:"follow"}).then(e=>e.text()).then(e=>{App.state.deviceBank=JSON.parse(e)}).catch(e=>console.log("error",e))},get_system_settings:()=>{fetch("/get/settings",{method:"GET",redirect:"follow"}).then(e=>e.text()).then(e=>{App.state.settings=JSON.parse(e)}).catch(e=>console.log("error",e))},get_device_history:()=>{fetch("/get/history",{method:"GET",redirect:"follow"}).then(e=>e.text()).then(e=>{App.state.device_history=JSON.parse(e)}).catch(e=>console.log("error",e))},render_stream:()=>{return'\n        <section class="data_stream_container">\n          <fieldset>\n              <legend><a href="#data_stream">#</a> Cortex Data Stream</legend>\n              <div class=\'data_stream_feed\'>\n              \n              </div>\n          </fieldset>\n        </section>\n        '},stream_feed:()=>{socket.on("stream",e=>{if("dashboard"===App.state._to_render){data="<div class='data_stream_feed_element'></div>";let i=document.createElement("div");i.setAttribute("class","data_stream_feed_element"),i.innerHTML=`${e.timestamp}[${e.deviceID}]: ${e.data}`,document.querySelector(".data_stream_feed").prepend(i);var n=e.data,t=parseInt(e.data);t&&(n=t.toPrecision(4),console.log(t));var a=`data_stream_ui_block_${e.deviceID}`;document.querySelector(`#${a}`).innerHTML=n}})},render_landing:()=>"\n            <div class='landing'>\n                <img style='width:35%'src=\"./public/images/cortex.iot-brand-logo-mark-black.png\" alt=\"\">\n                <h1>Cortex.iot</h1>\n                <a onclick=\"App.state.change_view('dashboard')\">Enter<a>\n            </div>\n          ",render_dashboard:()=>`\n            ${App.state.render_nav_bar()}\n            <div class='boards_content'>\n            ${App.state.render_board_devices()}\n            ${App.state.render_stream()}\n\n            \x3c!-- The Modal --\x3e\n            <div id="myModal" class="modal">\n\n              \x3c!-- Modal content --\x3e\n              <div class="modal-content">\n                <span class="close">&times;</span>\n                <p>Some text in the Modal..</p>\n              </div>\n\n            </div>\n\n\n            </div>\n        `,render_board_devices:()=>{var e="";return App.state.deviceBank.forEach(n=>{console.log(n);var t=`\n            <div class="board_details">\n              <div><span>${n.uid}</span></div>\n              <div>\n                <ion-icon style="color:${n.color}" name="hardware-chip-outline"> </ion-icon>\n                <a><ion-icon name="options-outline" onclick='App.state.render_modal()'></ion-icon></a>\n              </div>\n            </div>\n          `,a="";n.devices.forEach(e=>{var n=" ",t=" ";switch(e.class){case"hygrometer":console.log("hyrgo"),n=` <div class='data_stream_block ${e.class}'><span id="data_stream_ui_block_${e.uid}">00</span>%</div>`,t=`<ion-icon style="color:${e.color}" name="water-outline"></ion-icon> `;break;case"thermometer":console.log("temp"),n=` <div class='data_stream_block ${e.class}'><span id="data_stream_ui_block_${e.uid}">0.0</span>*C</div>`,t=` <ion-icon style="color:${e.color}" name="thermometer-outline"></ion-icon> `}console.log(e);var i=`\n              <div class="device_container humidity">\n                  ${n}\n                  <div>${e.nid}</div>\n                  <div>\n                    ${t}\n                    <ion-icon name="receipt-outline"></ion-icon>\n                    <a><ion-icon name="options-outline" onclick='App.state.render_modal()'></ion-icon></a>\n                  </div>\n              </div>\n            `;a+=i}),e+=`\n          <div class='board_container'>\n            ${t}\n            ${a}\n          </div>\n          `}),e},render_target_hardware_viewer:e=>{},render_target_hardware_raw_data_viewer:e=>{},render_settings:()=>{var e="";switch(App.state.settings.SAMPLE_TEMP_SCALE){case"C":e="\n            \n            <option>- Pick a Scale -</option>\n            <option selected >C (celcius)</option>\n            <option>F (fahrenheit)</option>\n            <option>K (kelvin)</option>\n            \n            ";break;case"F":e="\n            \n            <option>- Pick a Scale -</option>\n            <option >C (celcius)</option>\n            <option selected>F (fahrenheit)</option>\n            <option>K (kelvin)</option>\n            \n            ";break;case"K":e="\n            \n            <option>- Pick a Scale -</option>\n            <option >C (celcius)</option>\n            <option >F (fahrenheit)</option>\n            <option selected>K (kelvin)</option>\n            \n            "}return`\n            ${App.state.render_nav_bar()}\n            \n            <section id="general_setting">\n              <fieldset>\n                <legend><a href="#general_setting">#</a> General Settings</legend>\n                <div>\n                    <label for="example-input-text">System Name:</label>\n                    <input type="text" id="example-input-text" value='${App.state.settings.SYSTEM_NAME}'>\n                </div>\n\n              </fieldset>\n\n            </section>\n\n            <section id="software_settings">\n                <fieldset>\n                    <legend><a href="#software_settings">#</a> Software Settings</legend>\n\n                    <div>\n                        <label for="example-input-text">Database:</label>\n                        <input type="text" id="example-input-text" value='${App.state.settings.DATABASE}'>\n                    </div>\n\n                    <div>\n                        <label for="example-input-text">Database URL:</label>\n                        <input type="text" id="example-input-text" value='${App.state.settings.DATABASE_URL}'>\n                    </div>\n\n                </fieldset>\n\n            </section>\n\n            <section id="hardware_settings">\n                <fieldset>\n                    <legend><a href="#hardware_settings">#</a> Hardware Settings</legend>\n\n                    <div>\n                        <label for="example-input-text">Hardware Sample Rate: Every</label>\n                        <input type="number" id="example-input-text" value='${App.state.settings.HARDWARE_SAMPLE_RATE}'>\n                        milliseconds\n                    </div>\n\n                    <div>\n                        <label for="example-select1">Sample Tempurature Scale:</label>\n                        <select id="example-select1">\n                            ${e}\n                        </select>\n                    </div>\n\n                </fieldset>\n            </section>\n\n\n        `},render_settings_device_bank:()=>{var e=`${App.state.render_nav_bar()}`;return App.state.deviceBank.forEach(n=>{console.log(n);var t=`\n            <div class="board_details">\n              <div> <ion-icon style="color:${n.color}" name="hardware-chip-outline"> </ion-icon> <span>${n.uid}</span></div>\n              <div>\n                <ion-icon name="close-circle-outline"></ion-icon>\n                <ion-icon name="settings-outline"></ion-icon>\n              </div>\n            </div>\n          `,a="";n.devices.forEach(e=>{var n=" ",t=" ";switch(e.class){case"hygrometer":console.log("hyrgo"),n=`<ion-icon style="color:${e.color}" name="water-outline"></ion-icon>  `,t="";break;case"thermometer":console.log("temp"),n=` <ion-icon style="color:${e.color}" name="thermometer-outline"></ion-icon> `,t=""}console.log(e);var i=`\n              <div class="device_container humidity">\n                  ${n}\n                  <div>${e.nid}</div>\n                  <div>\n                    ${t}\n                    <ion-icon name="close-circle-outline"></ion-icon>\n                    <ion-icon name="settings-outline"></ion-icon>\n                  </div>\n              </div>\n            `;a+=i}),e+=`\n          <div class='board_container'>\n            ${t}\n            ${a}\n          </div>\n          `}),e},render_nav_bar:()=>`\n        <header role="banner">\n          <div>\n            <img style='width:32px'src="./public/images/cortex.iot-brand-logo-mark-black.png" alt="">\n          </div>\n          <div>\n            ${App.state._to_render}</div>\n          <div class='nav_right_links'> \n            <small>            \n              <a onclick="App.state.change_view('dashboard')">Dashboard</a> |\n              <a onclick="App.state.change_view('settings')">Settings</a>  |\n              <a onclick="App.state.change_view('device_bank')">Hardware</a>\n            </small> \n          </div>\n        <hr>\n        </header>\n        `,render_modal:()=>{var e=document.getElementById("myModal");e.style.display="block",document.getElementsByClassName("close")[0].onclick=function(){e.style.display="none"},window.onclick=function(n){n.target==e&&(e.style.display="none")}},change_view:e=>(App.state._to_render=e,updateTree()),report:()=>{console.log(App.state)},view_handler:()=>(console.log(App.state._to_render),"landing"===App.state._to_render?App.state.render_landing():"dashboard"===App.state._to_render?(App.state.stream_feed(),App.state.render_dashboard()):"settings"===App.state._to_render?App.state.render_settings():"hardware_viewer"===App.state._to_render?App.state.render_target_hardware_viewer():"hardware_raw_data_viewer"===App.state._to_render?App.state.render_target_hardware_raw_data_viewer():"device_bank"===App.state._to_render?App.state.render_settings_device_bank():void 0)};const updateTree=()=>{document.querySelector("body").innerHTML=App()};App.state.get_system_settings(),App.state.get_device_bank(),App.state.get_device_history(),updateTree();